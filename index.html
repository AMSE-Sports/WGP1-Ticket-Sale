<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>WGP#1 ‚Äî Visitor & Staff Registration</title>

  <!-- Supabase JS Client -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.48.0/dist/umd/supabase.js"></script>
  <script>
    const SUPABASE_URL = 'https://mhecpnqwwxspxfhdvzsc.supabase.co';
const SUPABASE_ANON_KEY =
  'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1oZWNwbnF3d3hzcHhmaGR2enNjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMwMDc0MjEsImV4cCI6MjA3ODU4MzQyMX0.ONaEMqU6BHuMSywE3Yvtbj78NqBbecI18amsD18Cgnc';
    
    const sb = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

    async function submitToSupabase(payload) {
      const { visitor, staff, submittedAt } = payload;

      const { error } = await sb
        .from('ticket_sales')
        .insert({
          submitted_at: submittedAt,
          visitor_email: null,
          visitor_first_name: visitor.firstName,
          visitor_last_name: visitor.lastName,
          visitor_gender: visitor.gender,
          visitor_age_range: visitor.ageRange,
          visitor_country: visitor.country,
          visitor_city: visitor.city,
          visitor_thai_province: null,
          visitor_source: visitor.source,
          visitor_consent: !!visitor.consent,
          staff_name: staff.staffName,
          ticket_type: staff.ticketType,
          ticket_qty: Number(staff.ticketQty || 0),
          amount_paid: Number(staff.amountPaid || 0),
          pay_method: staff.payMethod || ''
        });

      if (error) {
        console.error('[Supabase insert error]', error);
        throw error;
      }
    }
  </script>

  <style>
    :root {
      --primary:#f37021;
      --border:#ececec;
      --ok:#16a34a;

      --font-base:   clamp(18px, 2vw, 22px);
      --font-label:  clamp(17px, 1.9vw, 21px);
      --font-title:  clamp(24px, 2.6vw, 32px);
      --font-note:   clamp(14px, 1.6vw, 18px);
    }

    * { box-sizing:border-box; }

    body {
      margin:0;
      font-family:system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif;
      background:#fafafa;
      color:#111;
      font-size:var(--font-base);
      width:100%;
      min-height:100vh;
    }

    .header { background:#000; }
    .header img { display:block; width:100%; height:auto; }

    .container {
      width:100%;
      max-width:none;
      margin:0;
      padding:0;
    }

    .screen {
      min-height:100vh;
      display:flex;
      flex-direction:column;
    }

    .card {
      width:100%;
      background:#fff;
      border-radius:0;
      border:0;
      box-shadow:none;
    }

    .head {
      padding:24px 20px;
      border-bottom:1px solid var(--border);
    }
    .head h2 {
      margin:0;
      font-size:var(--font-title);
      font-weight:900;
    }

    .body { padding:24px 20px; }

    .row {
      display:grid;
      grid-template-columns:1fr;
      gap:16px;
      margin-bottom:16px;
    }
    @media (min-width:760px) {
      .row.two { grid-template-columns:1fr 1fr; }
    }

    /* ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞ STEP */
    .form-step {
      position: relative;
      border: 1px solid var(--border);
      border-radius: 16px;
      margin-bottom: 18px;
      background: #fff;
      padding: 58px 16px 16px;
      transition: border-color .2s, box-shadow .2s, background .2s;
    }

    .form-step .step-badge {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 42px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 16px 16px 0 0;
      font-size: var(--font-note);
      font-weight: 800;
      background: #f3f4f6;
      color: #111;
      border-bottom: 1px solid var(--border);
    }

    .form-step.active {
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(243,112,33,.18);
      background: #fffdf8;
    }
    .form-step.active .step-badge {
      background: var(--primary);
      color: #fff;
      border-bottom-color: var(--primary);
    }

    .form-step.complete {
      border-color: #16a34a;
      background: #dcfce7;
    }
    .form-step.complete .step-badge {
      background: #16a34a;
      color: #fff;
      border-bottom-color: #16a34a;
    }

    .form-step.complete label.title,
    .form-step.complete .note,
    .form-step.complete input,
    .form-step.complete select {
      color:#111 !important;
    }
    .form-step.complete input::placeholder,
    .form-step.complete select::placeholder {
      color:#9ca3af;
    }

    label.title {
      font-weight:800;
      font-size:var(--font-label);
      margin-bottom:6px;
      display:block;
    }
    label .en {
      font-weight:600;
      color:#555;
      margin-left:4px;
      font-size:calc(var(--font-label) - 1px);
    }

    input, select {
      width:100%;
      padding:14px 16px;
      border-radius:14px;
      border:1px solid var(--border);
      outline:none;
      background:#fff;
      font-family:inherit;
      font-size:var(--font-base);
    }
    input:focus, select:focus {
      border-color:var(--primary);
      box-shadow:0 0 0 3px rgba(243,112,33,.2);
    }

    .btn {
      display:inline-flex;
      align-items:center;
      justify-content:center;
      font-weight:800;
      border:0;
      padding:18px 24px;
      border-radius:16px;
      cursor:pointer;
      font-size:var(--font-base);
    }
    .btn.primary {
      background:var(--primary);
      color:#fff;
      box-shadow:0 10px 24px -16px rgba(243,112,33,.85);
    }
    .btn.dark { background:#111; color:#fff; }
    .btn.wide { width:100%; }

    .thankfull {
      min-height:70vh;
      display:flex;
      justify-content:center;
      align-items:center;
      text-align:center;
      background:#e97435;
      padding:80px 20px;
    }
    .text-block { max-width:900px; }

    .big-text {
      font-size:clamp(40px, 5.8vw, 72px);
      font-weight:900;
      line-height:1.25;
      color:#fff;
      margin:0 0 24px;
      text-shadow:0 3px 12px rgba(0,0,0,0.25);
    }
    .big-text.th {
      font-size:clamp(34px, 4.8vw, 58px);
      margin-top:10px;
    }
    .medium-text {
      font-size:clamp(20px, 3vw, 30px);
      font-weight:600;
      line-height:1.6;
      color:#fff;
      margin:10px 0 16px;
      opacity:0.95;
      text-shadow:0 2px 8px rgba(0,0,0,0.25);
    }
    .big-text.th,
    .medium-text.th {
      margin-top:4px;
    }
    
/* ‡πÉ‡∏´‡∏°‡πà */
.final-complete {
  text-align:center;
  padding:48px 20px;
  color:#fff;
  background:linear-gradient(135deg, var(--ok), #4ade80);
}

    .pay-choice {
      display:inline-flex;
      align-items:center;
      gap:8px;
      margin-right:18px;
      font-size:var(--font-base);
    }

    .note {
      color:#666;
      font-size:var(--font-note);
    }

    .hidden { display:none !important; }

    .footer {
      padding:12px 16px;
      text-align:center;
      color:#666;
      font-size:var(--font-note);
    }

    .total-line { font-weight:800; }

    input[type="checkbox"],
    input[type="radio"] {
      width:auto;
      accent-color:var(--primary);
    }

    label.consent-check {
      display:flex;
      gap:10px;
      align-items:flex-start;
      font-size:var(--font-base);
      margin-top:8px;
    }
    label.consent-check input[type="checkbox"] {
      flex:0 0 auto;
      width:1.25em;
      height:1.25em;
      margin-top:0.25em;
    }
    label.consent-check span {
      flex:1 1 auto;
      line-height:1.5;
    }

    .consent-desc { margin-bottom:10px; }

    .modal { display:none; } /* (‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÉ‡∏ä‡πâ modal ‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ) */

    @media (min-width: 768px) and (pointer: coarse) {
      select,
      select option {
        font-size: 22px;
        line-height: 1.6;
      }
    }
  </style>
</head>
<body>
  <div class="header">
    <img src="Header.png" alt="WGP#1 Waterjet World Cup 2025 Header">
  </div>

  <!-- SCREEN 1: VISITOR -->
  <section id="screen-visitor" class="screen container">
    <div class="card">
      <div class="head">
        <h2>‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 1 ‚Äî ‡∏ú‡∏π‡πâ‡∏ä‡∏° (Visitor)</h2>
      </div>
      <form class="body" id="visitor-form">

        <!-- STEP 1 : Name -->
        <div class="form-step" data-step="1">
          <div class="step-badge">STEP 1</div>

          <div class="row two">
            <div>
              <label class="title">1. ‡∏ä‡∏∑‡πà‡∏≠‡∏à‡∏£‡∏¥‡∏á<span class="en"> / First Name</span> *</label>
              <input id="v-first" required>
            </div>
            <div>
              <label class="title">2. ‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•<span class="en"> / Last Name</span> *</label>
              <input id="v-last" required>
            </div>
          </div>

          <div class="note" style="margin-top:-6px; margin-bottom:0;">
            ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‚Äì‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•‡∏ï‡∏≤‡∏°‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á ‚Ä¢ Please use your legal first and last name.
          </div>
        </div>

        <!-- STEP 2 : Gender / Age -->
        <div class="form-step" data-step="2">
          <div class="step-badge">STEP 2</div>

          <div class="row two">
            <div>
              <label class="title">3. ‡πÄ‡∏û‡∏®<span class="en"> / Gender</span> *</label>
              <select id="v-gender" required>
                <option value="">‚Äî ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏û‡∏® / Select ‚Äî</option>
                <option value="male">‡∏ä‡∏≤‡∏¢ / Male</option>
                <option value="female">‡∏´‡∏ç‡∏¥‡∏á / Female</option>
                <option value="unspecified">‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏ / Prefer not to say</option>
              </select>
            </div>
            <div>
              <label class="title">4. ‡∏≠‡∏≤‡∏¢‡∏∏<span class="en"> / Age</span> *</label>
              <select id="v-age" required>
                <option value="">‚Äî ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡πà‡∏ß‡∏á‡∏≠‡∏≤‡∏¢‡∏∏ / Select ‚Äî</option>
                <option>‡∏ï‡πà‡∏≥‡∏Å‡∏ß‡πà‡∏≤ 18 ‡∏õ‡∏µ / Under 18 Yrs.</option>
                <option>18-25 ‡∏õ‡∏µ / 18‚Äì25 Yrs.</option>
                <option>26-40 ‡∏õ‡∏µ / 26‚Äì40 Yrs.</option>
                <option>41-60 ‡∏õ‡∏µ / 41‚Äì60 Yrs.</option>
                <option>60 ‡∏õ‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ / 60+ Yrs.</option>
              </select>
            </div>
          </div>
        </div>

             <!-- STEP 3 : Country / City -->
<div class="form-step" data-step="3">
  <div class="step-badge">STEP 3</div>

  <div class="row two">
    <div>
      <label class="title">
        5. ‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡∏ó‡∏µ‡πà‡∏≠‡∏≤‡∏®‡∏±‡∏¢
        <span class="en"> / Country of Residence</span> *
      </label>
      <input
        id="v-country"
        list="country-list"
        required
        placeholder="‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏û‡∏¥‡∏°‡∏û‡πå 2‚Äì3 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£ ‡πÄ‡∏ä‡πà‡∏ô Tha, Jap, Uni...">
      <div class="note">
        ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ä‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏® ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ ‚Ä¢ Type a few letters and pick from the list.
      </div>

      <datalist id="country-list">
        <option value="Thailand">
        <option value="Afghanistan">
        <option value="Albania">
        <option value="Algeria">
        <option value="Andorra">
        <option value="Angola">
        <option value="Antigua and Barbuda">
        <option value="Argentina">
        <option value="Armenia">
        <option value="Australia">
        <option value="Austria">
        <option value="Azerbaijan">
        <option value="Bahamas">
        <option value="Bahrain">
        <option value="Bangladesh">
        <option value="Barbados">
        <option value="Belarus">
        <option value="Belgium">
        <option value="Belize">
        <option value="Benin">
        <option value="Bhutan">
        <option value="Bolivia">
        <option value="Bosnia and Herzegovina">
        <option value="Botswana">
        <option value="Brazil">
        <option value="Brunei">
        <option value="Bulgaria">
        <option value="Burkina Faso">
        <option value="Burundi">
        <option value="Cambodia">
        <option value="Cameroon">
        <option value="Canada">
        <option value="Cape Verde">
        <option value="Central African Republic">
        <option value="Chad">
        <option value="Chile">
        <option value="China">
        <option value="Colombia">
        <option value="Comoros">
        <option value="Congo">
        <option value="Costa Rica">
        <option value="C√¥te d‚ÄôIvoire">
        <option value="Croatia">
        <option value="Cuba">
        <option value="Cyprus">
        <option value="Czechia">
        <option value="Democratic Republic of the Congo">
        <option value="Denmark">
        <option value="Djibouti">
        <option value="Dominica">
        <option value="Dominican Republic">
        <option value="Ecuador">
        <option value="Egypt">
        <option value="El Salvador">
        <option value="Equatorial Guinea">
        <option value="Eritrea">
        <option value="Estonia">
        <option value="Eswatini">
        <option value="Ethiopia">
        <option value="Fiji">
        <option value="Finland">
        <option value="France">
        <option value="Gabon">
        <option value="Gambia">
        <option value="Georgia">
        <option value="Germany">
        <option value="Ghana">
        <option value="Greece">
        <option value="Grenada">
        <option value="Guatemala">
        <option value="Guinea">
        <option value="Guinea-Bissau">
        <option value="Guyana">
        <option value="Haiti">
        <option value="Honduras">
        <option value="Hong Kong">
        <option value="Hungary">
        <option value="Iceland">
        <option value="India">
        <option value="Indonesia">
        <option value="Iran">
        <option value="Iraq">
        <option value="Ireland">
        <option value="Israel">
        <option value="Italy">
        <option value="Jamaica">
        <option value="Japan">
        <option value="Jordan">
        <option value="Kazakhstan">
        <option value="Kenya">
        <option value="Kiribati">
        <option value="Kuwait">
        <option value="Kyrgyzstan">
        <option value="Laos">
        <option value="Latvia">
        <option value="Lebanon">
        <option value="Lesotho">
        <option value="Liberia">
        <option value="Libya">
        <option value="Liechtenstein">
        <option value="Lithuania">
        <option value="Luxembourg">
        <option value="Madagascar">
        <option value="Malawi">
        <option value="Malaysia">
        <option value="Maldives">
        <option value="Mali">
        <option value="Malta">
        <option value="Marshall Islands">
        <option value="Mauritania">
        <option value="Mauritius">
        <option value="Mexico">
        <option value="Micronesia">
        <option value="Moldova">
        <option value="Monaco">
        <option value="Mongolia">
        <option value="Montenegro">
        <option value="Morocco">
        <option value="Mozambique">
        <option value="Myanmar">
        <option value="Namibia">
        <option value="Nauru">
        <option value="Nepal">
        <option value="Netherlands">
        <option value="New Zealand">
        <option value="Nicaragua">
        <option value="Niger">
        <option value="Nigeria">
        <option value="North Korea">
        <option value="North Macedonia">
        <option value="Norway">
        <option value="Oman">
        <option value="Pakistan">
        <option value="Palau">
        <option value="Panama">
        <option value="Papua New Guinea">
        <option value="Paraguay">
        <option value="Peru">
        <option value="Philippines">
        <option value="Poland">
        <option value="Portugal">
        <option value="Qatar">
        <option value="Romania">
        <option value="Russia">
        <option value="Rwanda">
        <option value="Saint Kitts and Nevis">
        <option value="Saint Lucia">
        <option value="Saint Vincent and the Grenadines">
        <option value="Samoa">
        <option value="San Marino">
        <option value="Sao Tome and Principe">
        <option value="Saudi Arabia">
        <option value="Senegal">
        <option value="Serbia">
        <option value="Seychelles">
        <option value="Sierra Leone">
        <option value="Singapore">
        <option value="Slovakia">
        <option value="Slovenia">
        <option value="Solomon Islands">
        <option value="Somalia">
        <option value="South Africa">
        <option value="South Korea">
        <option value="South Sudan">
        <option value="Spain">
        <option value="Sri Lanka">
        <option value="Sudan">
        <option value="Suriname">
        <option value="Sweden">
        <option value="Switzerland">
        <option value="Syria">
        <option value="Taiwan">
        <option value="Tajikistan">
        <option value="Tanzania">
        <option value="Timor-Leste">
        <option value="Togo">
        <option value="Tonga">
        <option value="Trinidad and Tobago">
        <option value="Tunisia">
        <option value="Turkey">
        <option value="Turkmenistan">
        <option value="Tuvalu">
        <option value="Uganda">
        <option value="Ukraine">
        <option value="United Arab Emirates">
        <option value="United Kingdom">
        <option value="United States">
        <option value="Uruguay">
        <option value="Uzbekistan">
        <option value="Vanuatu">
        <option value="Venezuela">
        <option value="Vietnam">
        <option value="Yemen">
        <option value="Zambia">
        <option value="Zimbabwe">
      </datalist>
    </div>

    <div>
      <label class="title">
        6. ‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏≠‡∏≤‡∏®‡∏±‡∏¢<span class="en"> / City</span> *
      </label>
      <input
        id="v-city"
        required
        pattern="[\u0E00-\u0E7F a-zA-Z-]+"
        placeholder="‡πÄ‡∏ä‡πà‡∏ô Pattaya / ‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏Ø">
      <div class="note">
        ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏≠‡∏±‡∏Å‡∏©‡∏£‡πÑ‡∏ó‡∏¢/‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©‡πÅ‡∏•‡∏∞‡∏ä‡πà‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô ‚Ä¢ Thai/English letters & spaces only
      </div>
    </div>
  </div>
</div>
      

        <!-- STEP 4 : Source (multi-select checkboxes) -->
        <div class="form-step" data-step="4">
          <div class="step-badge">STEP 4</div>

          <div class="row">
            <div>
              <label class="title">
                7. ‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏£‡∏≤‡∏ö‡∏Ç‡πà‡∏≤‡∏ß‡∏à‡∏≤‡∏Å‡∏™‡∏∑‡πà‡∏≠‡πÉ‡∏î
                <span class="en">/ How did you hear about us?</span> *
              </label>
              <div class="note" style="margin-bottom:8px;">
                ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏î‡πâ‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 1 ‡∏Ç‡πâ‡∏≠ ‚Ä¢ You may select more than one channel.
              </div>

              <div class="source-options">
                <label class="consent-check">
                  <input type="checkbox" name="v-source" value="pattaya-promotions">
                  <span>From Promotions in Pattaya / ‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡πÉ‡∏ô‡πÄ‡∏°‡∏∑‡∏≠‡∏á</span>
                </label>

                <label class="consent-check">
                  <input type="checkbox" name="v-source" value="online-media">
                  <span>From Online Media / ‡∏à‡∏≤‡∏Å‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå</span>
                </label>

                <label class="consent-check">
                  <input type="checkbox" name="v-source" value="news-tv">
                  <span>From News & TV / ‡∏à‡∏≤‡∏Å‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏û‡∏¥‡∏°‡∏û‡πå‡∏´‡∏£‡∏∑‡∏≠‡πÇ‡∏ó‡∏£‡∏ó‡∏±‡∏®‡∏ô‡πå</span>
                </label>

                <label class="consent-check">
                  <input type="checkbox" name="v-source" value="world-series-2025">
                  <span>From the World Series 2025 / ‡∏à‡∏≤‡∏Å‡∏á‡∏≤‡∏ô World Series 2025</span>
                </label>

                <label class="consent-check">
                  <input type="checkbox" name="v-source" value="friend">
                  <span>From a Friend or Acquaintance / ‡∏à‡∏≤‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏ô‡∏£‡∏π‡πâ‡∏à‡∏±‡∏Å</span>
                </label>
              </div>
            </div>
          </div>
        </div>

        <!-- STEP 5 : Consent -->
        <div class="form-step" data-step="5">
          <div class="step-badge">STEP 5</div>

          <div class="row">
            <div>
              <label class="title">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°<span class="en">/ Consent</span> *</label>

              <div class="consent-desc">
                <strong>EN: Media (Photo & Video) & Personal Data</strong>
                <p class="note">
                  By attending the WGP#1 Waterjet World Cup 2025, which includes live broadcasting and global media coverage,
                  you grant the event organizers and their partners the right to photograph, film, and record your image and voice
                  for use in promotions, advertising, live streams, and other media‚Äîwithout the need for further consent or
                  compensation. Entering the event area constitutes full and unconditional consent. If you do not wish to appear
                  in such media, please avoid camera zones or broadcast areas.
                </p>

                <strong>TH: ‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏• ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏†‡∏≤‡∏û/‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠</strong>
                <p class="note">
                  ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏ä‡∏°‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô WGP#1 Waterjet World Cup 2025 ‡∏ã‡∏∂‡πà‡∏á‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏ñ‡πà‡∏≤‡∏¢‡∏ó‡∏≠‡∏î‡∏™‡∏î‡πÅ‡∏•‡∏∞‡πÄ‡∏ú‡∏¢‡πÅ‡∏û‡∏£‡πà‡∏™‡∏π‡πà‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏∞‡∏ó‡∏±‡πà‡∏ß‡πÇ‡∏•‡∏Å
                  ‡∏ó‡πà‡∏≤‡∏ô‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡∏û‡∏±‡∏ô‡∏ò‡∏°‡∏¥‡∏ï‡∏£ ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏†‡∏≤‡∏û‡∏ô‡∏¥‡πà‡∏á ‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠ ‡πÅ‡∏•‡∏∞‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏Ç‡∏≠‡∏á‡∏ó‡πà‡∏≤‡∏ô ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏™‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå
                  ‡πÇ‡∏Ü‡∏©‡∏ì‡∏≤ ‡∏ñ‡πà‡∏≤‡∏¢‡∏ó‡∏≠‡∏î‡∏™‡∏î ‡πÅ‡∏•‡∏∞‡∏™‡∏∑‡πà‡∏≠‡∏≠‡∏∑‡πà‡∏ô ‡πÜ ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Ç‡∏≠‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡∏´‡∏£‡∏∑‡∏≠‡∏à‡πà‡∏≤‡∏¢‡∏Ñ‡πà‡∏≤‡∏ï‡∏≠‡∏ö‡πÅ‡∏ó‡∏ô‡πÉ‡∏î ‡πÜ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° ‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏±‡∏î‡∏á‡∏≤‡∏ô
                  ‡∏ñ‡∏∑‡∏≠‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°‡πÇ‡∏î‡∏¢‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå ‡∏´‡∏≤‡∏Å‡πÑ‡∏°‡πà‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏†‡∏≤‡∏û ‡πÇ‡∏õ‡∏£‡∏î‡∏´‡∏•‡∏µ‡∏Å‡πÄ‡∏•‡∏µ‡πà‡∏¢‡∏á‡∏ö‡∏£‡∏¥‡πÄ‡∏ß‡∏ì‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ñ‡πà‡∏≤‡∏¢‡∏ó‡∏≠‡∏î‡∏™‡∏î
                </p>
              </div>

              <label class="consent-check">
                <input type="checkbox" id="v-consent" name="v-consent" required>
                <span>
                  ‡∏â‡∏±‡∏ô‡πÑ‡∏î‡πâ‡∏≠‡πà‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°‡∏ï‡∏≤‡∏°‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≤‡∏á‡∏ï‡πâ‡∏ô<br>
                  I have read and consent to the conditions above.
                </span>
              </label>
            </div>
          </div>
        </div>

        <button class="btn primary wide" type="submit">
          ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏ä‡∏° ‚Ä¢ Confirm Visitor Details
        </button>
      </form>
    </div>
    <div class="footer">¬© 2025 WGP#1</div>
  </section>

  <!-- SCREEN 2: THANK YOU -->
  <section id="screen-thank" class="screen container hidden">
    <div class="card">
      <div class="thankfull">
        <div class="text-block">
          <h2 class="big-text">Ticket is being processed.</h2>
          <h2 class="big-text th">‡∏ï‡∏±‡πã‡∏ß‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</h2>
          <p class="medium-text">Please notify the staff to proceed to the next step.</p>
          <p class="medium-text th">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏ô‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</p>
        </div>
      </div>

      <div class="body" style="text-align:center">
        <button class="btn dark" id="to-staff">
          ‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà ‚Ä¢ Continue to Staff
        </button>
      </div>
    </div>
  </section>

  <!-- SCREEN 3: STAFF -->
  <section id="screen-staff" class="screen container hidden">
    <div class="card">
      <div class="head"><h2>‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 2 ‚Äî ‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà (Staff)</h2></div>
      <form class="body" id="staff-form" autocomplete="off">
        <div class="row two">
          <div>
            <label class="title">‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà<span class="en">/ Staff</span> *</label>
            <select id="s-staff" required>
              <option value="">‚Äî ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà / Select ‚Äî</option>
              <option>‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà A</option>
              <option>‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà B</option>
              <option>‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà C</option>
              <option>‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà D</option>
              <option>‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà E</option>
              <option>‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà F</option>
            </select>
          </div>
          <div>
            <label class="title">‡∏ï‡∏±‡πã‡∏ß‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó<span class="en">/ Ticket Type</span> *</label>
            <select id="s-ticket" required>
              <option value="">‚Äî ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ï‡∏±‡πã‡∏ß / Select ‚Äî</option>
              <option value="250-17" data-price="250">250‡∏ø - Wed 17</option>
              <option value="250-18" data-price="250">250‡∏ø - Thu 18</option>
              <option value="250-19" data-price="250">250‡∏ø - Fri 19</option>
              <option value="350-20" data-price="350">350‡∏ø - Sat 20</option>
              <option value="350-21" data-price="350">350‡∏ø - Sun 21</option>
              <option value="400-wed-fri" data-price="400">400‡∏ø - Weekday (Wed-Fri)</option>
              <option value="500-weekend" data-price="500">500‡∏ø - Pro Weekend (Sat-Sun)</option>
              <option value="750-all" data-price="750">750‡∏ø - All Event</option>
            </select>
          </div>
        </div>

        <div class="row two">
          <div>
            <label class="title">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ï‡∏±‡πã‡∏ß‡∏ó‡∏µ‡πà‡∏ã‡∏∑‡πâ‡∏≠<span class="en">/ Quantity</span> *</label>
            <input id="s-qty" type="number" min="1" step="1" required>
          </div>
          <div>
            <label class="title">‡∏¢‡∏≠‡∏î‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô (THB)<span class="en">/ Amount Paid</span> *</label>
            <input id="s-amount" type="number" min="0" step="1" required>
          </div>
        </div>

        <div class="row">
          <div>
            <label class="title">‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞<span class="en">/ Payment Method</span> *</label>
            <label class="pay-choice">
              <input type="radio" name="pay" value="‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î" required>
              <span>‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î / Cash</span>
            </label>
            <label class="pay-choice">
              <input type="radio" name="pay" value="‡πÇ‡∏≠‡∏ô‡∏à‡πà‡∏≤‡∏¢">
              <span>‡πÇ‡∏≠‡∏ô‡∏à‡πà‡∏≤‡∏¢ / Bank Transfer</span>
            </label>
          </div>
        </div>

        <div class="row">
          <div class="total-line">
            ‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡πÇ‡∏î‡∏¢‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ ‚Ä¢ Auto Total:
            <span id="auto-total">0</span> THB
          </div>
        </div>

        <div style="display:flex; gap:10px; flex-wrap:wrap">
          <button class="btn primary" id="finalize" type="submit">
            Finalize Registration
          </button>
        </div>
      </form>
    </div>
  </section>

  <!-- SCREEN 4: COMPLETE -->
  <section id="screen-complete" class="screen container hidden">
    <div class="card">
      <div class="final-complete">
        <h2 style="margin:0 0 8px 0;">COMPLETE ‚úÖ</h2>
        <p style="margin:0">‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô‡πÅ‡∏•‡πâ‡∏ß ‚Äî ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡∏ä‡∏°‡∏Ñ‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</p>
      </div>
      <div class="body" style="text-align:center">
        <button class="btn primary" id="back-to-start">
          ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà ‚Ä¢ Back to Start
        </button>
      </div>
    </div>
  </section>

  <script>
 

  function show(id){
    ['screen-visitor','screen-thank','screen-staff','screen-complete']
      .forEach(i => document.getElementById(i).classList.add('hidden'));
    document.getElementById(id).classList.remove('hidden');
    window.scrollTo({ top: 0, behavior: 'smooth' });
  }

  // Visitor -> Thank (‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡∏°‡∏µ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å source ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏ä‡πà‡∏≠‡∏á‡∏Å‡πà‡∏≠‡∏ô)
  document.getElementById('visitor-form').addEventListener('submit', function(e){
    e.preventDefault();

    const sourceChecks = document.querySelectorAll('input[name="v-source"]:checked');
    if (!sourceChecks.length) {
      alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡πÉ‡∏ô‡∏Ç‡πâ‡∏≠ 7 (How did you hear about us?)');
      return;
    }

    show('screen-thank');
  });

  // Thank -> Staff
  document.getElementById('to-staff').addEventListener('click', function(){
    show('screen-staff');
  });

  // Auto price calculation
  (function(){
    var sel = document.getElementById('s-ticket');
    var qty = document.getElementById('s-qty');
    var amt = document.getElementById('s-amount');
    var totalEl = document.getElementById('auto-total');
    function recalc(){
      var price = Number((sel.options[sel.selectedIndex] || {}).getAttribute('data-price') || 0);
      var q = Math.max(0, Number(qty.value || 0));
      var total = price * q;
      totalEl.textContent = total;
      if (!document.activeElement || document.activeElement.id !== 's-amount') {
        amt.value = total;
      }
    }
    sel.addEventListener('change', recalc);
    qty.addEventListener('input', recalc);
    amt.addEventListener('input', function(){
      totalEl.textContent = amt.value || 0;
    });
    recalc();
  })();

  // Staff submit -> Supabase -> Complete
  document.getElementById('staff-form').addEventListener('submit', async function(e){
    e.preventDefault();

    const sourceChecks = Array.from(document.querySelectorAll('input[name="v-source"]:checked'));
    const sourceValue = sourceChecks.map(c => c.value).join(', ');

    var payload = {
  visitor: {
    firstName: document.getElementById('v-first').value.trim(),
    lastName: document.getElementById('v-last').value.trim(),
    gender: document.getElementById('v-gender').value,
    ageRange: document.getElementById('v-age').value,
    country: document.getElementById('v-country').value,
    city: document.getElementById('v-city').value.trim(),
    source: sourceValue, // üëà ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ô‡∏µ‡πâ
    consent: document.getElementById('v-consent').checked
  },
  staff: {
    staffName: document.getElementById('s-staff').value,
    ticketType: document.getElementById('s-ticket').value,
    ticketQty: document.getElementById('s-qty').value,
    amountPaid: document.getElementById('s-amount').value,
    payMethod: (document.querySelector('input[name=pay]:checked') || {}).value || ''
  },
  submittedAt: new Date().toISOString()
};

    var btn = document.getElementById('finalize');
    var old = btn.textContent;
    btn.textContent = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πà‡∏á... / Submitting...';
    btn.disabled = true;

    try {
      await submitToSupabase(payload);
      show('screen-complete');
    } catch (err) {
      console.error('[Submit Error]', err);
      alert('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á');
    } finally {
      btn.textContent = old;
      btn.disabled = false;
    }
  });

  // Complete -> Back to start
 document.getElementById('back-to-start').addEventListener('click', function(){
  document.getElementById('visitor-form').reset();
  document.getElementById('staff-form').reset();

  resetSteps();   // üëà ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏≠‡∏≠‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î

  show('screen-visitor');
});

  // ----- STEP HIGHLIGHT: active + complete -----
  (function(){
    const stepEls = Array.from(document.querySelectorAll('.form-step'));
    if (!stepEls.length) return;

    function isStepComplete(stepEl){
      const requiredFields = stepEl.querySelectorAll('input[required], select[required]');

      for (const f of requiredFields) {
        if (f.type === 'checkbox' || f.type === 'radio') {
          const name = f.name;
          const checked = stepEl.querySelectorAll(`input[name="${name}"]:checked`);
          if (!checked.length) return false;
        } else {
          if (!f.value || !String(f.value).trim()) return false;
        }
      }

      // ‡∏Å‡∏£‡∏ì‡∏µ STEP 4: ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ checkbox v-source ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏≠‡∏±‡∏ô
      const sourceBoxes = stepEl.querySelectorAll('input[name="v-source"]');
      if (sourceBoxes.length) {
        const anyChecked = stepEl.querySelector('input[name="v-source"]:checked');
        if (!anyChecked) return false;
      }

      return true;
    }

    function refreshSteps(){
      let firstIncomplete = -1;

      stepEls.forEach((step, idx) => {
        const complete = isStepComplete(step);
        step.classList.toggle('complete', complete);
        step.classList.remove('active');

        if (!complete && firstIncomplete === -1) {
          firstIncomplete = idx;
        }
      });

      const currentIndex = (firstIncomplete === -1)
        ? stepEls.length - 1
        : firstIncomplete;

      stepEls[currentIndex].classList.add('active');
    }

    const fields = document.querySelectorAll('.form-step input, .form-step select');
    fields.forEach(f => {
      f.addEventListener('focus', () => {
        const step = f.closest('.form-step');
        if (!step) return;
        stepEls.forEach(s => {
          if (!s.classList.contains('complete')) {
            s.classList.remove('active');
          }
        });
        if (!step.classList.contains('complete')) {
          step.classList.add('active');
        }
      });

      f.addEventListener('input', refreshSteps);
      f.addEventListener('change', refreshSteps);
    });

    refreshSteps();
  })();

    function resetSteps() {
  const steps = document.querySelectorAll('.form-step');
  steps.forEach(step => {
    step.classList.remove('complete');
    step.classList.remove('active');
  });

  // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÉ‡∏´‡πâ STEP 1 active ‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á
  const firstStep = document.querySelector('.form-step[data-step="1"]');
  if (firstStep) firstStep.classList.add('active');
}
  </script>
</body>
</html>
