<!doctype html>
<html lang="th" data-theme="light">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>WGP#1 Waterjet World Cup 2025 ‚Äî Registration</title>
  <meta name="color-scheme" content="light dark">
  <link rel="icon" href="data:,">
  <style>
    :root{--primary:#f37021;--text:#111;--muted:#666;--bg:#fff;--border:#ececec;--ok:#16a34a;--err:#dc2626;--card:#fff}
    [data-theme="dark"]{--bg:#0b0b0c;--card:#121214;--text:#e7e7ea;--muted:#a1a1aa;--border:#242428}
    *{box-sizing:border-box}html,body{height:100%}body{margin:0;font-family:ui-sans-serif,system-ui,Segoe UI,Roboto,Inter,Arial,sans-serif;background:var(--bg);color:var(--text)}
    header{position:sticky;top:0;z-index:30;background:rgba(255,255,255,.85);backdrop-filter:blur(8px);border-bottom:1px solid var(--border)}
    [data-theme="dark"] header{background:rgba(18,18,20,.75)}
    .wrap{max-width:1024px;margin:0 auto;padding:14px 16px}
    .brand{display:flex;gap:12px;align-items:center}
    .badge{width:40px;height:40px;border-radius:12px;background:var(--primary);color:#fff;display:grid;place-items:center;font-weight:800}
    h1{font-size:20px;margin:0}
    .chip{display:inline-flex;align-items:center;gap:6px;font-size:12px;padding:6px 10px;border-radius:999px;background:#fff4ee;border:1px solid #ffd9c2;color:#7a2f00}
    main{min-height:calc(100% - 56px)}
    .grid{display:grid;gap:14px}
    .hero{width:100%;display:block;overflow:hidden;border-bottom:1px solid var(--border)}
    .hero img{width:100%;height:auto;display:block}
    .card{border:1px solid var(--border);border-radius:18px;background:var(--card);box-shadow:0 10px 30px -18px rgba(0,0,0,.25);overflow:hidden}
    .card .head{padding:16px;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center}
    .card .body{padding:16px}
    label{font-size:13px;font-weight:600;margin-bottom:6px;display:block}
    .sub{font-size:12px;color:var(--muted);margin-top:4px}
    .row{display:grid;grid-template-columns:1fr;gap:12px}
    @media(min-width:760px){.row.two{grid-template-columns:1fr 1fr}}
    input,select{width:100%;padding:12px;border:1px solid var(--border);border-radius:12px;background:transparent;color:var(--text);outline:none;transition:border .2s, box-shadow .2s}
    input:focus,select:focus,button:focus{border-color:var(--primary);box-shadow:0 0 0 3px rgba(243,112,33,.15)}
    .invalid{border-color:var(--err)!important; box-shadow:0 0 0 3px rgba(220,38,38,.12)!important}
    .err-text{color:var(--err); font-size:12px; margin-top:6px}
    .btn{display:inline-flex;gap:8px;align-items:center;border:0;border-radius:16px;padding:12px 18px;font-weight:800;cursor:pointer;transition:transform .06s ease, background-color .15s ease, box-shadow .15s ease;user-select:none}
    .btn:active{transform:translateY(1px)}
    .btn.primary{background:var(--primary);color:#fff}
    .btn.dark{background:#111;color:#fff}
    .btn.green{background:var(--ok);color:#fff}
    .btn.ghost{background:transparent;color:var(--text);border:1px solid var(--border)}
    .btn.wide{width:100%; justify-content:center; box-shadow:0 8px 18px -10px rgba(243,112,33,.65)}
    .btn.big{height:60px; font-size:18px; border-radius:20px}
    .btn.primary:hover{background:#d65f1e}
    .toast{position:fixed;right:16px;bottom:16px;background:var(--card);border:1px solid var(--border);box-shadow:0 10px 30px -18px rgba(0,0,0,.4);padding:12px 14px;border-radius:12px;font-size:14px;display:none;z-index:50}
    .stepper{display:flex;gap:10px;align-items:center}
    .dot{width:26px;height:26px;border-radius:999px;display:grid;place-items:center;background:#f7f7f8;border:1px solid var(--border);color:#666;font-weight:800}
    .dot.on{background:var(--primary);color:#fff;border-color:var(--primary)}
    .bar{flex:1;height:4px;border-radius:999px;background:linear-gradient(90deg,var(--primary),#ffd9c2);opacity:.5}
    .view{display:none}
    .view.show{display:block;animation:fade .25s ease}
    @keyframes fade{from{opacity:.3;transform:translateY(6px)}to{opacity:1;transform:none}}
    .thank-hero{background:linear-gradient(135deg,#f37021,#ff8c4a);color:#fff;border-radius:12px;padding:32px 20px;text-align:center}
    .consent-wrap{border:1px solid var(--border);border-radius:12px;background:#fff;padding:10px}
    .consent-box{line-height:1.55; max-height: 180px; overflow:auto; padding-right:6px}
    .consent-box p{margin:6px 0}
    .consent-title{font-weight:800; margin-top:4px}
    .consent-check{display:flex;align-items:center;gap:10px;margin-top:10px;justify-content:flex-start}
    .consent-check input{flex:0 0 auto;width:20px;height:20px;margin:0}
    .consent-check span{flex:1 1 auto;white-space:normal;margin:0;text-align:left}
  </style>
</head>
<body>
  <header>
    <div class="wrap" style="display:flex;align-items:center;justify-content:space-between">
      <div class="brand">
        <div class="badge">W</div>
        <div>
          <h1>WGP#1 Waterjet World Cup 2025</h1>
          <div class="chip">Visitor Registration & Staff Ticket Entry</div>
        </div>
      </div>
      <div class="sub">Jomtien Beach, Pattaya ¬∑ 17‚Äì21 Dec 2025</div>
    </div>
  </header>

  <!-- HERO IMAGE (from provided Header.png) -->
  <div class="hero">
    <img src="Header.png" alt="WGP#1 Waterjet World Cup 2025 ‚Äî Header">
  </div>

  <main class="wrap grid">
    <div class="card">
      <div class="body">
        <div class="stepper">
          <div class="dot on" id="s1">1</div><div class="bar"></div><div class="dot" id="s2">2</div><div class="bar"></div><div class="dot" id="s3">3</div>
        </div>
        <div class="sub" id="step-hint" style="margin-top:8px">Step 1: ‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏ä‡∏° ‚Üí ‡∏Å‡∏î‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô</div>
      </div>
    </div>

    <!-- VIEW 1: VISITOR -->
    <section class="view show" id="view-visitor">
      <div class="card">
        <div class="head"><h2>‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 1 ‚Äî ‡∏ú‡∏π‡πâ‡∏ä‡∏° (Visitor)</h2></div>
        <form class="body" id="visitor-form" novalidate>
          <div class="row">
            <div>
              <label>1) ‡∏≠‡∏µ‡πÄ‡∏°‡∏• ‚Ä¢ Email *</label>
              <input type="email" id="v-email" required placeholder="name@example.com">
              <div class="err-text" id="err-v-email" style="display:none"></div>
            </div>
          </div>
          <div class="row two">
            <div>
              <label>2.1) ‡∏ä‡∏∑‡πà‡∏≠‡∏à‡∏£‡∏¥‡∏á ‚Ä¢ First Name *</label>
              <input type="text" id="v-first" required>
              <div class="err-text" id="err-v-first" style="display:none"></div>
            </div>
            <div>
              <label>2.2) ‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• ‚Ä¢ Last Name *</label>
              <input type="text" id="v-last" required>
              <div class="err-text" id="err-v-last" style="display:none"></div>
            </div>
          </div>
          <div class="row two">
            <div>
              <label>3) ‡πÄ‡∏û‡∏® ‚Ä¢ Gender *</label>
              <select id="v-gender" required>
                <option value="">‚Äî ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏û‡∏® / Select ‚Äî</option>
                <option value="male">‡∏ä‡∏≤‡∏¢ ‚Ä¢ Male</option>
                <option value="female">‡∏´‡∏ç‡∏¥‡∏á ‚Ä¢ Female</option>
                <option value="unspecified">‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏ ‚Ä¢ Prefer not to say</option>
              </select>
              <div class="err-text" id="err-v-gender" style="display:none"></div>
            </div>
            <div>
              <label>4) ‡∏≠‡∏≤‡∏¢‡∏∏ ‚Ä¢ Age Range *</label>
              <select id="v-age" required>
                <option value="">‚Äî ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡πà‡∏ß‡∏á‡∏≠‡∏≤‡∏¢‡∏∏ / Select ‚Äî</option>
                <option>‡∏ï‡πà‡∏≥‡∏Å‡∏ß‡πà‡∏≤ 18 ‡∏õ‡∏µ ‚Ä¢ Under 18</option>
                <option>18-25 ‡∏õ‡∏µ ‚Ä¢ 18‚Äì25</option>
                <option>26-40 ‡∏õ‡∏µ ‚Ä¢ 26‚Äì40</option>
                <option>41-60 ‡∏õ‡∏µ ‚Ä¢ 41‚Äì60</option>
                <option>60 ‡∏õ‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ ‚Ä¢ 60+</option>
              </select>
              <div class="err-text" id="err-v-age" style="display:none"></div>
            </div>
          </div>
          <div class="row two">
            <div>
              <label>5.1) ‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡∏ó‡∏µ‡πà‡∏≠‡∏≤‡∏®‡∏±‡∏¢ ‚Ä¢ Country *</label>
              <select id="v-country" required></select>
              <div class="err-text" id="err-v-country" style="display:none"></div>
            </div>
            <div>
              <label>5.2) ‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏≠‡∏≤‡∏®‡∏±‡∏¢ ‚Ä¢ City (letters only) *</label>
              <input type="text" id="v-city" required pattern="[\u0E00-\u0E7F a-zA-Z-]+" title="‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏±‡∏Å‡∏©‡∏£‡πÑ‡∏ó‡∏¢/‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏© ‡∏ä‡πà‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á ‡∏´‡∏£‡∏∑‡∏≠‡∏Ç‡∏µ‡∏î‡∏Å‡∏•‡∏≤‡∏á (-) ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô" placeholder="‡πÄ‡∏ä‡πà‡∏ô Pattaya / ‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏Ø">
              <div class="sub">‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏≠‡∏±‡∏Å‡∏©‡∏£‡πÑ‡∏ó‡∏¢/‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©‡πÅ‡∏•‡∏∞‡∏ä‡πà‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô ‚Ä¢ TH/EN letters and spaces only</div>
              <div class="err-text" id="err-v-city" style="display:none"></div>
            </div>
          </div>
          <div class="row" id="thai-province-row" style="display:none">
            <div>
              <label>6) ‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î‡πÉ‡∏ô‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡πÑ‡∏ó‡∏¢ ‚Ä¢ Thai Province *</label>
              <select id="v-province"></select>
              <div class="err-text" id="err-v-province" style="display:none"></div>
            </div>
          </div>
          <div class="row">
            <div>
              <label>7) ‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏£‡∏≤‡∏ö‡∏Ç‡πà‡∏≤‡∏ß‡∏à‡∏≤‡∏Å‡∏™‡∏∑‡πà‡∏≠‡πÉ‡∏î ‚Ä¢ Source *</label>
              <select id="v-source" required>
                <option value="">‚Äî ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á / Select ‚Äî</option>
                <option value="pattaya-promotions">From Promotions in Pattaya ‚Ä¢ ‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡πÉ‡∏ô‡πÄ‡∏°‡∏∑‡∏≠‡∏á</option>
                <option value="online-media">From online media ‚Ä¢ ‡∏à‡∏≤‡∏Å‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå</option>
                <option value="news-tv">From news and TV ‚Ä¢ ‡∏à‡∏≤‡∏Å‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏û‡∏¥‡∏°‡∏û‡πå/‡πÇ‡∏ó‡∏£‡∏ó‡∏±‡∏®‡∏ô‡πå</option>
                <option value="world-series-2025">From the World Series 2025 ‚Ä¢ ‡∏à‡∏≤‡∏Å‡∏á‡∏≤‡∏ô‡πÄ‡∏ß‡∏¥‡∏•‡πå‡∏î‡∏ã‡∏µ‡∏£‡∏µ‡∏™‡πå 2025</option>
                <option value="friend">From a Friend or Acquaintance ‚Ä¢ ‡∏à‡∏≤‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏ô‡∏£‡∏π‡πâ‡∏à‡∏±‡∏Å</option>
              </select>
              <div class="err-text" id="err-v-source" style="display:none"></div>
            </div>
          </div>
          <div class="row">
            <div>
              <label>8) Consent / ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏° *</label>
              <div class="consent-wrap">
                <div class="consent-box" id="consent-box">
                  <p class="consent-title">EN</p>
                  <p>By attending the WGP#1 Waterjet World Cup 2025, which includes live broadcasting and global media coverage, you grant the event organizers and their partners the right to photograph, film, and record your image and voice for use in promotions, advertising, live streams, and other media ‚Äî without the need for further consent or compensation. Entering the event area constitutes full and unconditional consent. If you do not wish to appear in such media, please avoid camera zones or broadcast areas.</p>
                  <p class="consent-title">TH</p>
                  <p>‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏ä‡∏°‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô WGP#1 Waterjet World Cup 2025 ‡∏ã‡∏∂‡πà‡∏á‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏ñ‡πà‡∏≤‡∏¢‡∏ó‡∏≠‡∏î‡∏™‡∏î‡πÅ‡∏•‡∏∞‡πÄ‡∏ú‡∏¢‡πÅ‡∏û‡∏£‡πà‡∏™‡∏π‡πà‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏∞‡∏ó‡∏±‡πà‡∏ß‡πÇ‡∏•‡∏Å ‡∏ó‡πà‡∏≤‡∏ô‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡∏û‡∏±‡∏ô‡∏ò‡∏°‡∏¥‡∏ï‡∏£‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏†‡∏≤‡∏û‡∏ô‡∏¥‡πà‡∏á ‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠ ‡πÅ‡∏•‡∏∞‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏Ç‡∏≠‡∏á‡∏ó‡πà‡∏≤‡∏ô ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏™‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå ‡πÇ‡∏Ü‡∏©‡∏ì‡∏≤ ‡∏ñ‡πà‡∏≤‡∏¢‡∏ó‡∏≠‡∏î‡∏™‡∏î ‡πÅ‡∏•‡∏∞‡∏™‡∏∑‡πà‡∏≠‡∏≠‡∏∑‡πà‡∏ô ‡πÜ ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Ç‡∏≠‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡∏´‡∏£‡∏∑‡∏≠‡∏à‡πà‡∏≤‡∏¢‡∏Ñ‡πà‡∏≤‡∏ï‡∏≠‡∏ö‡πÅ‡∏ó‡∏ô‡πÉ‡∏î ‡πÜ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° ‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏±‡∏î‡∏á‡∏≤‡∏ô‡∏ñ‡∏∑‡∏≠‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°‡πÇ‡∏î‡∏¢‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå ‡∏´‡∏≤‡∏Å‡πÑ‡∏°‡πà‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏†‡∏≤‡∏û ‡πÇ‡∏õ‡∏£‡∏î‡∏´‡∏•‡∏µ‡∏Å‡πÄ‡∏•‡∏µ‡πà‡∏¢‡∏á‡∏ö‡∏£‡∏¥‡πÄ‡∏ß‡∏ì‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ñ‡πà‡∏≤‡∏¢‡∏ó‡∏≠‡∏î‡∏™‡∏î</p>
                </div>
                <label class="consent-check" for="v-consent">
                  <input type="checkbox" id="v-consent" required>
                  <span>‡∏â‡∏±‡∏ô‡πÑ‡∏î‡πâ‡∏≠‡πà‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°‡∏ï‡∏≤‡∏°‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≤‡∏á‡∏ï‡πâ‡∏ô ‚Ä¢ I have read and consent</span>
                </label>
              </div>
              <div class="err-text" id="err-v-consent" style="display:none"></div>
            </div>
          </div>
          <button class="btn primary wide big" id="visitor-submit" type="submit">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô ‚Ä¢ Confirm Registration</button>
        </form>
      </div>
    </section>

    <!-- VIEW 2: THANK YOU -->
    <section class="view" id="view-thanks">
      <div style="min-height:70vh;display:flex;align-items:center;justify-content:center">
        <div class="card" style="max-width:860px;width:100%;overflow:hidden">
          <div class="thank-hero">
            <div style="font-size:56px;line-height:1;font-weight:900;letter-spacing:.5px">THANK YOU!</div>
            <div style="font-size:18px;margin-top:10px;opacity:.95">
              Thank you for being part of this world-class competition ‚Äî we hope you enjoy an unforgettable and thrilling experience!
            </div>
            <div style="font-size:18px;margin-top:8px;opacity:.95">
              ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏£‡πà‡∏ß‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô‡∏£‡∏∞‡∏î‡∏±‡∏ö‡πÇ‡∏•‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ô‡∏µ‡πâ ‚Äî ‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏ô‡∏∏‡∏Å‡∏Å‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏™‡∏∏‡∏î‡∏°‡∏±‡∏ô‡∏™‡πå!
            </div>
          </div>
          <div class="body" style="text-align:center">
            <div class="sub" style="margin:6px 0 18px">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏á‡∏≤‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</div>
            <button class="btn dark" id="to-staff" style="min-width:260px">‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà ‚Ä¢ Continue for Staff</button>
          </div>
        </div>
      </div>
    </section>

    <!-- VIEW 3: STAFF -->
    <section class="view" id="view-staff">
      <div class="card" id="staff-card">
        <div class="head">
          <h2>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡πã‡∏ß‡∏ó‡∏µ‡πà‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ã‡∏∑‡πâ‡∏≠ ‚Ä¢ Record Ticket Purchase</h2>
          <span class="sub">‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î ‚Äú‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‚Äù</span>
        </div>
        <form class="body" id="staff-form" novalidate>
          <div class="row two">
            <div>
              <label>1) ‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏ó‡∏µ‡πà‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£ ‚Ä¢ Staff *</label>
              <select id="s-staff" required>
                <option value="">‚Äî ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà / Select ‚Äî</option>
                <option>‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà A</option><option>‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà B</option><option>‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà C</option>
                <option>‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà D</option><option>‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà E</option><option>‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà F</option>
              </select>
            </div>
            <div>
              <label>2) ‡∏ï‡∏±‡πã‡∏ß‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó ‚Ä¢ Ticket Type *</label>
              <select id="s-ticket" required>
                <option value="">‚Äî ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ï‡∏±‡πã‡∏ß / Select ‚Äî</option>
                <option value="250-17" data-price="250">250‡∏ø - One Day - Wed 17th</option>
                <option value="250-18" data-price="250">250‡∏ø - One Day - Thu 18th</option>
                <option value="250-19" data-price="250">250‡∏ø - One Day - Fri 19th</option>
                <option value="350-20" data-price="350">350‡∏ø - One Day - Sat 20th</option>
                <option value="350-21" data-price="350">350‡∏ø - One Day - Sun 21th</option>
                <option value="400-wed-fri" data-price="400">400‡∏ø - 3 Days - Weekday (Wed-Fri)</option>
                <option value="500-weekend" data-price="500">500‡∏ø - 2 Days - Pro Weekend (Sat - Sun)</option>
                <option value="750-all" data-price="750">750‡∏ø - 5 Days - All Event (Wed-Sun)</option>
              </select>
            </div>
          </div>
          <div class="row two">
            <div>
              <label>3) ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ï‡∏±‡πã‡∏ß‡∏ó‡∏µ‡πà‡∏ã‡∏∑‡πâ‡∏≠ ‚Ä¢ Quantity *</label>
              <input type="number" id="s-qty" min="1" step="1" required>
            </div>
            <div>
              <label>4) ‡∏¢‡∏≠‡∏î‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô ‚Ä¢ Amount Paid (THB) *</label>
              <input type="number" id="s-amount" min="0" step="1" required>
            </div>
          </div>
          <div class="sub" id="calc" style="margin:4px 0 8px">üí° ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏¢‡∏≠‡∏î‡∏ä‡∏≥‡∏£‡∏∞: <b id="calc-amount">‚Äî</b></div>
          <div class="row">
            <label>5) ‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞ ‚Ä¢ Payment Method *</label>
            <div style="display:flex;gap:12px;flex-wrap:wrap">
              <label style="display:flex;gap:6px;align-items:center"><input type="radio" name="pay" value="‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î" required> ‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î ‚Ä¢ Cash</label>
              <label style="display:flex;gap:6px;align-items:center"><input type="radio" name="pay" value="‡πÇ‡∏≠‡∏ô‡∏à‡πà‡∏≤‡∏¢"> ‡πÇ‡∏≠‡∏ô‡∏à‡πà‡∏≤‡∏¢ ‚Ä¢ Bank transfer</label>
            </div>
          </div>
          <div style="display:flex;gap:8px;flex-wrap:wrap">
            <button class="btn green" type="submit" id="final-submit">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô ‚Ä¢ Finalize Registration</button>
            <button class="btn ghost" type="button" id="reset-staff">Reset</button>
          </div>
        </form>
      </div>
    </section>

    <footer class="sub" style="text-align:center;padding:24px">¬© 2025 WGP#1 ‚Ä¢ Single-file form.</footer>
    <div class="toast" id="toast"></div>
  </main>

<script>
// ---- CONFIG ----
const WEBHOOK_URL = 'https://script.google.com/macros/s/AKfycbyEMeXXjRFn9t9LVK4iAuuR_M7QuY1qAzVddEZJnI3tcMoF1ykfnnN2dMgGokqqMaUzRg/exec';
const API_KEY = 'JWC25';

// ---- DATA ----
const COUNTRIES = [
  "Thailand","Afghanistan","Albania","Algeria","Andorra","Angola","Argentina","Armenia","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bhutan","Bolivia","Bosnia and Herzegovina","Botswana","Brazil","Brunei","Bulgaria","Burkina Faso","Burundi","Cabo Verde","Cambodia","Cameroon","Canada","Central African Republic","Chad","Chile","China","Colombia","Comoros","Costa Rica","C√¥te d‚ÄôIvoire","Croatia","Cuba","Cyprus","Czechia","Democratic Republic of the Congo","Denmark","Djibouti","Dominica","Dominican Republic","Ecuador","Egypt","El Salvador","Equatorial Guinea","Eritrea","Estonia","Eswatini","Ethiopia","Fiji","Finland","France","Gabon","Gambia","Georgia","Germany","Ghana","Greece","Grenada","Guatemala","Guinea","Guinea-Bissau","Guyana","Haiti","Honduras","Hungary","Iceland","India","Indonesia","Iran","Iraq","Ireland","Israel","Italy","Jamaica","Japan","Jordan","Kazakhstan","Kenya","Kiribati","Kuwait","Kyrgyzstan","Laos","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Marshall Islands","Mauritius","Mexico","Micronesia","Moldova","Monaco","Mongolia","Montenegro","Morocco","Mozambique","Myanmar","Namibia","Nauru","Nepal","Netherlands","New Zealand","Nicaragua","Niger","Nigeria","North Korea","North Macedonia","Norway","Oman","Pakistan","Palau","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Poland","Portugal","Qatar","Romania","Russia","Rwanda","Saint Kitts and Nevis","Saint Lucia","Saint Vincent and the Grenadines","Samoa","San Marino","Sao Tome and Principe","Saudi Arabia","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Slovakia","Slovenia","Solomon Islands","Somalia","South Africa","South Korea","South Sudan","Spain","Sri Lanka","Sudan","Suriname","Sweden","Switzerland","Syria","Tajikistan","Tanzania","Timor-Leste","Togo","Tonga","Trinidad and Tobago","Tunisia","Turkey","Turkmenistan","Tuvalu","Uganda","Ukraine","United Arab Emirates","United Kingdom","United States","Uruguay","Uzbekistan","Vanuatu","Venezuela","Vietnam","Yemen","Zambia","Zimbabwe"
];
const THAI_PROVINCES = ["‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏°‡∏´‡∏≤‡∏ô‡∏Ñ‡∏£","‡∏Å‡∏£‡∏∞‡∏ö‡∏µ‡πà","‡∏Å‡∏≤‡∏ç‡∏à‡∏ô‡∏ö‡∏∏‡∏£‡∏µ","‡∏Å‡∏≤‡∏¨‡∏™‡∏¥‡∏ô‡∏ò‡∏∏‡πå","‡∏Å‡∏≥‡πÅ‡∏û‡∏á‡πÄ‡∏û‡∏ä‡∏£","‡∏Ç‡∏≠‡∏ô‡πÅ‡∏Å‡πà‡∏ô","‡∏à‡∏±‡∏ô‡∏ó‡∏ö‡∏∏‡∏£‡∏µ","‡∏â‡∏∞‡πÄ‡∏ä‡∏¥‡∏á‡πÄ‡∏ó‡∏£‡∏≤","‡∏ä‡∏•‡∏ö‡∏∏‡∏£‡∏µ","‡∏ä‡∏±‡∏¢‡∏ô‡∏≤‡∏ó","‡∏ä‡∏±‡∏¢‡∏†‡∏π‡∏°‡∏¥","‡∏ä‡∏∏‡∏°‡∏û‡∏£","‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡∏£‡∏≤‡∏¢","‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà","‡∏ï‡∏£‡∏±‡∏á","‡∏ï‡∏£‡∏≤‡∏î","‡∏ï‡∏≤‡∏Å","‡∏ô‡∏Ñ‡∏£‡∏ô‡∏≤‡∏¢‡∏Å","‡∏ô‡∏Ñ‡∏£‡∏õ‡∏ê‡∏°","‡∏ô‡∏Ñ‡∏£‡∏û‡∏ô‡∏°","‡∏ô‡∏Ñ‡∏£‡∏£‡∏≤‡∏ä‡∏™‡∏µ‡∏°‡∏≤","‡∏ô‡∏Ñ‡∏£‡∏®‡∏£‡∏µ‡∏ò‡∏£‡∏£‡∏°‡∏£‡∏≤‡∏ä","‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå","‡∏ô‡∏ô‡∏ó‡∏ö‡∏∏‡∏£‡∏µ","‡∏ô‡∏£‡∏≤‡∏ò‡∏¥‡∏ß‡∏≤‡∏™","‡∏ô‡πà‡∏≤‡∏ô","‡∏ö‡∏∂‡∏á‡∏Å‡∏≤‡∏¨","‡∏ö‡∏∏‡∏£‡∏µ‡∏£‡∏±‡∏°‡∏¢‡πå","‡∏õ‡∏ó‡∏∏‡∏°‡∏ò‡∏≤‡∏ô‡∏µ","‡∏õ‡∏£‡∏∞‡∏à‡∏ß‡∏ö‡∏Ñ‡∏µ‡∏£‡∏µ‡∏Ç‡∏±‡∏ô‡∏ò‡πå","‡∏õ‡∏£‡∏≤‡∏à‡∏µ‡∏ô‡∏ö‡∏∏‡∏£‡∏µ","‡∏õ‡∏±‡∏ï‡∏ï‡∏≤‡∏ô‡∏µ","‡∏û‡∏£‡∏∞‡∏ô‡∏Ñ‡∏£‡∏®‡∏£‡∏µ‡∏≠‡∏¢‡∏∏‡∏ò‡∏¢‡∏≤","‡∏û‡∏±‡∏á‡∏á‡∏≤","‡∏û‡∏±‡∏ó‡∏•‡∏∏‡∏á","‡∏û‡∏¥‡∏à‡∏¥‡∏ï‡∏£","‡∏û‡∏¥‡∏©‡∏ì‡∏∏‡πÇ‡∏•‡∏Å","‡πÄ‡∏û‡∏ä‡∏£‡∏ö‡∏∏‡∏£‡∏µ","‡πÄ‡∏û‡∏ä‡∏£‡∏ö‡∏π‡∏£‡∏ì‡πå","‡πÅ‡∏û‡∏£‡πà","‡∏û‡∏∞‡πÄ‡∏¢‡∏≤","‡∏†‡∏π‡πÄ‡∏Å‡πá‡∏ï","‡∏°‡∏´‡∏≤‡∏™‡∏≤‡∏£‡∏Ñ‡∏≤‡∏°","‡∏°‡∏∏‡∏Å‡∏î‡∏≤‡∏´‡∏≤‡∏£","‡πÅ‡∏°‡πà‡∏Æ‡πà‡∏≠‡∏á‡∏™‡∏≠‡∏ô","‡∏¢‡πÇ‡∏™‡∏ò‡∏£","‡∏¢‡∏∞‡∏•‡∏≤","‡∏£‡πâ‡∏≠‡∏¢‡πÄ‡∏≠‡πá‡∏î","‡∏£‡∏∞‡∏ô‡∏≠‡∏á","‡∏£‡∏∞‡∏¢‡∏≠‡∏á","‡∏£‡∏≤‡∏ä‡∏ö‡∏∏‡∏£‡∏µ","‡∏•‡∏û‡∏ö‡∏∏‡∏£‡∏µ","‡∏•‡∏≥‡∏õ‡∏≤‡∏á","‡∏•‡∏≥‡∏û‡∏π‡∏ô","‡∏®‡∏£‡∏µ‡∏™‡∏∞‡πÄ‡∏Å‡∏©","‡∏™‡∏Å‡∏•‡∏ô‡∏Ñ‡∏£","‡∏™‡∏á‡∏Ç‡∏•‡∏≤","‡∏™‡∏ï‡∏π‡∏•","‡∏™‡∏°‡∏∏‡∏ó‡∏£‡∏õ‡∏£‡∏≤‡∏Å‡∏≤‡∏£","‡∏™‡∏°‡∏∏‡∏ó‡∏£‡∏™‡∏á‡∏Ñ‡∏£‡∏≤‡∏°","‡∏™‡∏°‡∏∏‡∏ó‡∏£‡∏™‡∏≤‡∏Ñ‡∏£","‡∏™‡∏£‡∏∞‡πÅ‡∏Å‡πâ‡∏ß","‡∏™‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏µ","‡∏™‡∏¥‡∏á‡∏´‡πå‡∏ö‡∏∏‡∏£‡∏µ","‡∏™‡∏∏‡πÇ‡∏Ç‡∏ó‡∏±‡∏¢","‡∏™‡∏∏‡∏û‡∏£‡∏£‡∏ì‡∏ö‡∏∏‡∏£‡∏µ","‡∏™‡∏∏‡∏£‡∏≤‡∏©‡∏é‡∏£‡πå‡∏ò‡∏≤‡∏ô‡∏µ","‡∏™‡∏∏‡∏£‡∏¥‡∏ô‡∏ó‡∏£‡πå","‡∏´‡∏ô‡∏≠‡∏á‡∏Ñ‡∏≤‡∏¢","‡∏´‡∏ô‡∏≠‡∏á‡∏ö‡∏±‡∏ß‡∏•‡∏≥‡∏†‡∏π","‡∏≠‡πà‡∏≤‡∏á‡∏ó‡∏≠‡∏á","‡∏≠‡∏≥‡∏ô‡∏≤‡∏à‡πÄ‡∏à‡∏£‡∏¥‡∏ç","‡∏≠‡∏∏‡∏î‡∏£‡∏ò‡∏≤‡∏ô‡∏µ","‡∏≠‡∏∏‡∏ï‡∏£‡∏î‡∏¥‡∏ï‡∏ñ‡πå","‡∏≠‡∏∏‡∏ó‡∏±‡∏¢‡∏ò‡∏≤‡∏ô‡∏µ","‡∏≠‡∏∏‡∏ö‡∏•‡∏£‡∏≤‡∏ä‡∏ò‡∏≤‡∏ô‡∏µ"];

// ---- Helpers ----
function toast(text){ const t=document.getElementById('toast'); t.textContent=text; t.style.display='block'; clearTimeout(t._h); t._h=setTimeout(()=>t.style.display='none', 3200); }
function showView(id){ document.querySelectorAll('.view').forEach(v=>v.classList.remove('show')); document.getElementById(id).classList.add('show'); window.scrollTo({top:0,behavior:'smooth'}); }
function setStep(n){
  document.getElementById('s1').classList.toggle('on', n>=1);
  document.getElementById('s2').classList.toggle('on', n>=2);
  document.getElementById('s3').classList.toggle('on', n>=3);
  const hint=document.getElementById('step-hint');
  if(n===1) hint.textContent='Step 1: ‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏ä‡∏° ‚Üí ‡∏Å‡∏î‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô';
  if(n===2) hint.textContent='Step 2: ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ú‡∏π‡πâ‡∏ä‡∏° ‚Üí ‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏Å‡∏î‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠';
  if(n===3) hint.textContent='Step 3: ‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡πã‡∏ß';
}

// ---- Init dropdowns ----
document.addEventListener('DOMContentLoaded', () => {
  try {
    const countrySel = document.getElementById('v-country');
    const provRow = document.getElementById('thai-province-row');
    const provSel = document.getElementById('v-province');

    // Country
    countrySel.innerHTML = '';
    const ph = document.createElement('option'); ph.value=''; ph.textContent='‚Äî ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏® / Select ‚Äî'; countrySel.appendChild(ph);
    COUNTRIES.forEach(c => { const o=document.createElement('option'); o.value=c; o.textContent=c; countrySel.appendChild(o); });
    countrySel.value = 'Thailand';

    // Province
    provSel.innerHTML='';
    THAI_PROVINCES.forEach(p => { const o=document.createElement('option'); o.value=p; o.textContent=p; provSel.appendChild(o); });

    function refreshProvince(){
      const isTH = (countrySel.value==='Thailand' || countrySel.value==='‡πÑ‡∏ó‡∏¢');
      provRow.style.display = isTH ? 'grid' : 'none';
      provSel.required = !!isTH;
      if(!isTH) provSel.value='';
    }
    countrySel.addEventListener('change', refreshProvince);
    refreshProvince();
  } catch(err) {
    console.error('[init dropdowns]', err);
  }
});

// ---- Visitor form ----
document.getElementById('visitor-form').addEventListener('submit', (e) => {
  e.preventDefault();
  const email=document.getElementById('v-email').value.trim();
  const first=document.getElementById('v-first').value.trim();
  const last=document.getElementById('v-last').value.trim();
  const gender=document.getElementById('v-gender').value;
  const age=document.getElementById('v-age').value;
  const country=document.getElementById('v-country').value;
  const city=document.getElementById('v-city').value.trim();
  const source=document.getElementById('v-source').value;
  const consent=document.getElementById('v-consent').checked;
  const province=document.getElementById('v-province').value;

  let bad=false;
  if(!email||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) bad=true;
  if(!first) bad=true;
  if(!last) bad=true;
  if(!gender) bad=true;
  if(!age) bad=true;
  if(!country) bad=true;
  if(!city||!/^[\u0E00-\u0E7F a-zA-Z-]+$/.test(city)) bad=true;
  if(!source) bad=true;
  if((country==='Thailand'||country==='‡πÑ‡∏ó‡∏¢')&&!province) bad=true;
  if(!consent) bad=true;

  if(bad){ toast('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô / Please complete all required fields'); return; }

  showView('view-thanks'); setStep(2);
});

// ---- Thank You -> Staff ----
document.getElementById('to-staff').addEventListener('click', () => { showView('view-staff'); setStep(3); });

// ---- Staff helpers ----
(function(){
  const ticketSel=document.getElementById('s-ticket');
  const qty=document.getElementById('s-qty');
  const amt=document.getElementById('s-amount');
  function recalc(){
    const price=Number(ticketSel.selectedOptions[0]?.getAttribute('data-price')||0);
    const q=Number(qty.value||0);
    const suggest=price*q;
    document.getElementById('calc-amount').textContent=suggest?(suggest.toLocaleString('en-US')+' THB'):'‚Äî';
    if(!amt.value&&suggest) amt.value=suggest;
  }
  ticketSel.addEventListener('change',recalc);
  qty.addEventListener('input',recalc);
})();

// ---- Staff submit ----
document.getElementById('staff-form').addEventListener('submit', async (e) => {
  e.preventDefault();
  const staffName=document.getElementById('s-staff').value;
  const ticketType=document.getElementById('s-ticket').value;
  const ticketQty=document.getElementById('s-qty').value;
  const amountPaid=document.getElementById('s-amount').value;
  const payMethod=(document.querySelector('input[name="pay"]:checked')||{}).value||'';
  if(!staffName||!ticketType||!ticketQty||!amountPaid||!payMethod){ toast('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô / Please complete all required fields'); return; }

  const payload={
    apiKey: API_KEY,
    visitor:{
      email:document.getElementById('v-email').value.trim(),
      firstName:document.getElementById('v-first').value.trim(),
      lastName:document.getElementById('v-last').value.trim(),
      gender:document.getElementById('v-gender').value,
      ageRange:document.getElementById('v-age').value,
      country:document.getElementById('v-country').value,
      city:document.getElementById('v-city').value.trim(),
      thaiProvince:document.getElementById('v-province').value,
      source:document.getElementById('v-source').value,
      consent:document.getElementById('v-consent').checked
    },
    staff:{ staffName, ticketType, ticketQty, amountPaid, payMethod },
    submittedAt:new Date().toISOString()
  };

  const btn=document.getElementById('final-submit');
  const old=btn.textContent; btn.textContent='‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å...'; btn.disabled=true;

  try{
    const res = await fetch(WEBHOOK_URL, {
      method: 'POST',
      headers: { 'Content-Type': 'text/plain' }, // simple request (no preflight)
      body: JSON.stringify(payload)
    });
    const statusOK = res.status>=200 && res.status<300;
    const ct = (res.headers.get('content-type')||'').toLowerCase();
    let data=null, txt='';
    if(ct.includes('application/json')){ try{ data=await res.json(); }catch(e){ data=null; } }
    else{ try{ txt=await res.text(); }catch(e){ txt=''; } }

    if(data && data.ok===false) throw new Error(data.error||'Server returned ok:false');
    if(!statusOK) throw new Error('HTTP '+res.status+(txt?(' ‚Äî '+txt.slice(0,120)) : ''));

    toast('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‚Ä¢ Registration Saved');

    // Reset & back to Visitor
    document.getElementById('visitor-form').reset();
    document.getElementById('staff-form').reset();
    // Rebuild country/province selects
    const cs=document.getElementById('v-country'); const pr=document.getElementById('v-province'); const prRow=document.getElementById('thai-province-row');
    cs.innerHTML=''; const ph=document.createElement('option'); ph.value=''; ph.textContent='‚Äî ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏® / Select ‚Äî'; cs.appendChild(ph);
    COUNTRIES.forEach(c=>{ const o=document.createElement('option'); o.value=c; o.textContent=c; cs.appendChild(o); });
    cs.value='Thailand';
    pr.innerHTML=''; THAI_PROVINCES.forEach(p=>{ const o=document.createElement('option'); o.value=p; o.textContent=p; pr.appendChild(o); });
    prRow.style.display='grid'; pr.required=true;

    showView('view-visitor'); setStep(1);
  }catch(err){
    console.error('[Submit Error]', err);
    toast('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á Google Sheets ‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à: ' + String(err && err.message ? err.message : err));
  }finally{
    btn.textContent=old; btn.disabled=false;
  }
});
</script>
</body>
</html>
